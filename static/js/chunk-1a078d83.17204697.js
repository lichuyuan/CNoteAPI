(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a078d83"],{"0fcf":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.goCreate()}}},[e._v("新建")]),e.selectedRowKeys.length>0?a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1"},[a("a-icon",{attrs:{type:"delete"}}),e._v("删除")],1)],1),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v("\n          批量操作 "),a("a-icon",{attrs:{type:"down"}})],1)],1):e._e(),a("a-input-search",{staticStyle:{"margin-left":"16px",width:"272px"},on:{search:e.onSearch}})],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:"_id",columns:e.columns,data:e.loadData,alert:{show:!0,clear:!0},rowSelection:{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}},scopedSlots:e._u([e._l(e.columns,function(t,n){return{key:t.dataIndex,fn:function(o,c){return t.scopedSlots?[a("div",{key:n},[c.editable?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:o},on:{change:function(a){return e.handleChange(a.target.value,c.key,t,c)}}}):[e._v(e._s(o))]],2)]:void 0}}}),{key:"action",fn:function(t,n){return[a("div",{staticClass:"editable-row-operations"},[n.editable?a("span",[a("a",{on:{click:function(){return e.save(n)}}},[e._v("保存")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"真的放弃编辑吗?"},on:{confirm:function(){return e.cancel(n)}}},[a("a",[e._v("取消")])])],1):a("span",[a("a",{staticClass:"edit",on:{click:function(){return e.edit(n)}}},[e._v("修改")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{staticClass:"delete",on:{click:function(){return e.del(n)}}},[e._v("删除")])],1)])]}}],null,!0)})],1)},o=[],c=a("2af9"),i=a("5723"),r={name:"TableList",components:{STable:c["e"]},data:function(){var e=this;return{advanced:!1,queryParam:{},columns:[{title:"类型",dataIndex:"typeName"},{title:"虎牙ID",dataIndex:"huya_nickname",width:90,scopedSlots:{customRender:"huya_nickname"}},{title:"虎牙号",dataIndex:"huya_id",scopedSlots:{customRender:"huya_id"}},{title:"yyuid",dataIndex:"huya_yyuid",scopedSlots:{customRender:"huya_yyuid"}},{title:"被占用次数",dataIndex:"occupied_count"},{title:"备注",dataIndex:"remark",scopedSlots:{customRender:"remark"}},{title:"负责人",dataIndex:"username"},{table:"操作",dataIndex:"action",width:"120px",scopedSlots:{customRender:"action"}}],loadData:function(){return i["a"].getPagination(e.queryParam).then(function(e){return e})},selectedRowKeys:[],selectedRows:[]}},methods:{onSearch:function(e){this.$refs.table.loadData({},{value:e})},goCreate:function(){this.$router.push({name:"orderAdd"})},handleChange:function(e,t,a,n){console.log(e,t,a),n[a.dataIndex]=e},edit:function(e){e.editable=!0},del:function(e){var t=this,a=this.$confirm({title:"警告",content:"真的要删除这条订单吗?",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){console.log("OK"),i["a"].removeOne(e).then(function(){a.destroy(),t.$refs.table.loadData()})},onCancel:function(){console.log("Cancel")}})},save:function(e){var t=this;e.editable=!1,i["a"].updateOne(e).then(function(){t.$message.success("更新成功"),t.$refs.table.loadData()})},cancel:function(e){e.editable=!1},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced}},watch:{}},d=r,u=(a("7bf1"),a("2877")),s=Object(u["a"])(d,n,o,!1,null,"1d765cdc",null);t["default"]=s.exports},5723:function(e,t,a){"use strict";var n=a("a525"),o=a("ca00"),c={ACCOUNT:"account"};t["a"]={getPagination:function(e){return new Promise(function(t){Object(n["a"])(c.ACCOUNT,"GET",e).then(function(e){e.data.docs.map(function(e){e.typeName=o["a"][e.type]}),t(e.data)})})},getAllSimple:function(){return new Promise(function(e){Object(n["a"])("account/simple").then(function(t){t.data.map(function(e){return e.typeName=o["a"][e.type],e}),e(t.data)})})},add:function(e){var t=e.remark,a=void 0===t?"":t,o=e.type,i=e.huyaNickname,r=e.huyaId,d=e.huyaYyuid,u={remark:a,type:o,huya_nickname:i,huya_id:r,huya_yyuid:d};return Object(n["a"])("".concat(c.ACCOUNT),"POST",u)},updateOne:function(e){var t=e._id,a=e.remark,o=void 0===a?"":a,i=e.huya_nickname,r=e.huya_id,d=e.huya_yyuid,u={remark:o,huya_nickname:i,huya_id:r,huya_yyuid:d};return Object(n["a"])("".concat(c.ACCOUNT,"/").concat(t),"PATCH",u)},removeOne:function(e){return Object(n["a"])("".concat(c.ACCOUNT,"/").concat(e._id),"DELETE")}}},"7bf1":function(e,t,a){"use strict";var n=a("a48bb"),o=a.n(n);o.a},a48bb:function(e,t,a){}}]);